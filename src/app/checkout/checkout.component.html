<main class="main">
  <div class="page-title light-background">
    <div class="container">
      <h1>Validation de la commande</h1>
    </div>
  </div>

  <section class="checkout-section section">
    <div class="container">
      <div class="row gy-4" *ngIf="cart.getItems().length > 0; else emptyCart">
        <!-- Shipping Details -->
        <div class="col-lg-7">
          <div class="checkout-form">
            <h3 class="mb-4">Détails de facturation</h3>
            <form (submit)="placeOrder()">
              <div class="row gy-3">
                <div class="col-md-6">
                  <label class="form-label">Prénom</label>
                  <input type="text" class="form-control" [(ngModel)]="formData.firstName" name="firstName" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Nom</label>
                  <input type="text" class="form-control" [(ngModel)]="formData.lastName" name="lastName" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Email</label>
                  <input type="email" class="form-control" [(ngModel)]="formData.email" name="email" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Téléphone</label>
                  <input type="tel" class="form-control" [(ngModel)]="formData.phone" name="phone" required>
                </div>
                <div class="col-12">
                  <label class="form-label">Adresse</label>
                  <input type="text" class="form-control" [(ngModel)]="formData.address" name="address" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Ville</label>
                  <input type="text" class="form-control" [(ngModel)]="formData.city" name="city" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Code Postal</label>
                  <input type="text" class="form-control" [(ngModel)]="formData.zip" name="zip" required>
                </div>
                <div class="col-12">
                  <label class="form-label">Notes de commande (optionnel)</label>
                  <textarea class="form-control" rows="4" [(ngModel)]="formData.notes" name="notes"></textarea>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="col-lg-5">
          <div class="order-summary">
            <h3 class="mb-4">Votre Commande</h3>
            <div class="summary-items">
              <div class="summary-item" *ngFor="let item of cart.getItems()">
                <div class="item-info">
                  <span class="name">{{ item.product.name }}</span>
                  <span class="qty">x {{ item.quantity }}</span>
                </div>
                <span class="price">Prix sur demande WhatsApp</span>
              </div>
            </div>
            
            <div class="summary-totals">
              <div class="row">
                <span>Sous-total</span>
                <span>Prix sur demande WhatsApp</span>
              </div>
              <div class="row">
                <span>TVA ({{ (cart.taxRate * 100) | number:'1.0-0' }}%)</span>
                <span>Prix sur demande WhatsApp</span>
              </div>
              <div class="row total">
                <span>Total</span>
                <span>Prix sur demande WhatsApp</span>
              </div>
            </div>

            <div class="payment-method mt-4">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="payment" id="cod" checked>
                <label class="form-check-label" for="cod">
                  Paiement à la livraison
                </label>
              </div>
              <p class="small text-muted mt-2">Payez en espèces lors de la livraison de votre commande.</p>
            </div>

            <button class="btn btn-primary w-100 mt-4" (click)="placeOrder()">Confirmer la commande</button>
          </div>
        </div>
      </div>

      <ng-template #emptyCart>
        <div class="text-center py-5">
          <h3>Votre panier est vide</h3>
          <p class="mb-4">Ajoutez des produits à votre panier pour passer commande.</p>
          <a routerLink="/category" class="btn btn-primary">Voir les produits</a>
        </div>
      </ng-template>
    </div>
  </section>
</main>
